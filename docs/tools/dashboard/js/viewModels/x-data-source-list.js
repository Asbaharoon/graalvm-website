define(["knockout","ojs/ojarraytreedataprovider","ojs/ojtreeview","ojs/ojknockout"],(function(o,e){return function(t){const n=o.observableArray();o.computed((function(){const o=t.model.dataSourceMap();n.remove(e=>!(e.id in o));for(const e in o)if(!n().find(o=>o.id===e)){const t=o[e],i=[];for(const o in t.format.sections){const n=t.format.sections[o];i.push({id:`${e}#${o}`,label:n.title})}n.push({id:e,label:`${t.name} (${t.format.shortName})`,children:i})}})),this.data=new e(n,{keyAttributes:"id"}),this.selectedChanged=function(o){o.detail.value.values().forEach(o=>{const e=o.split("#");if(2===e.length){const o=t.model.dataSourceMap()[e[0]],n=e[1],i=o.componentFor(n),a=o.sectionFor(n);t.model.addTile(i,o,n,a,{})}})},this.leafOnly=function(o){return o.leaf}}}));