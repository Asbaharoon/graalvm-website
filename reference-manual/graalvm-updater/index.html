<!DOCTYPE html>
<html xml:lang="en-us" lang="en-us">
    <head>
        




        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta property="og:site_name" content="Oracle Help Center">

        <!-- The title values -->
        <title></title>
        <meta property="og:title" content="">
        <meta name="application-name" content="GraalVM Community">
        <meta name="dcterms.title" content="">
        <!-- The description values -->
        
        
        
        <meta name="dcterms.created" content="2020-08-19T08:59:10+00:00">
        <meta name="dcterms.category" content="">
        <meta name="dcterms.identifier" content="">
        <meta name="dcterms.product" content="">
        <meta name="dcterms.isVersionOf" content="">

        
        <link rel="next" href="/en/graalvm/enterprise/20/docs/reference-manual/enterprise-native-image/" title="Next" type="text/html">
        <link rel="first" href="/main.html" title="First Page" type="text/html">
        <link rel="contents" href="/toc.htm" title="Table of Contents" type="text/html">
        <link rel="self" href="/reference-manual/graalvm-updater/" title="Current Page" type="text/html">

        <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
        <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
        <meta name="robots" content="all">
        <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
        <script>
            document.write('<style type="text/css">');
            document.write('body > .noscript, body > .noscript ~ * { opacity: 0; }');
            document.write('</style>');
        </script>
        <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
        <script>
            if (window.require === undefined) {
                document.write('<script data-main="../../sp_common/book-template/ohc-book-template/js/book-config" src="../../sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="../../sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet">');
            }
        </script>
    </head>
    <body>
        <div class="noscript alert alert-danger text-center" role="alert">
            
            <a href="/en/graalvm/enterprise/20/docs/reference-manual/enterprise-native-image/" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
            <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        </div>
        <article>
            <h2 id="graalvm-updater">GraalVM Updater</h2>

<ul>
  <li><a href="#component-installation">Component Installation</a></li>
  <li><a href="#installation-configuration">Installation Configuration</a></li>
  <li><a href="#rebuild-images">Rebuild Images</a></li>
  <li><a href="#graalvm-updater-commands-overview">GraalVM Updater Commands Overview</a></li>
  <li><a href="#configure-proxies">Configure Proxies</a></li>
  <li><a href="#replace-components-and-files">Replace Components and Files</a></li>
</ul>

<p>Oracle GraalVM Enterprise Edition includes <strong>GraalVM Updater</strong> – a command line
utility, <code>gu</code>, to install and manage additional components.</p>

<p>These are:</p>

<ul>
  <li><a href="/reference-manual/native-image/">Native Image</a> ahead of time compilation functionality that
allows scripted applications to be compiled ahead-of-time into a native
machine-code binary.</li>
  <li><a href="/reference-manual/llvm/">LLVM toolchain</a> –  a set of tools and APIs for compiling native programs to bitcode that can be executed with the GraalVM LLVM runtime.</li>
  <li><a href="/reference-manual/python/">Python interpreter</a> –  an implementation of the Python 3.8.2 language.</li>
  <li><a href="/reference-manual/ruby/">Ruby interpreter</a> – an implementation of the Ruby 2.6.6 programming language.</li>
  <li><a href="/reference-manual/r/">R interpreter</a> – a GNU R 3.6.1 compatible implementation of the R programming language.</li>
  <li><a href="/reference-manual/wasm/">GraalWasm</a> – an implementation of the WebAssembly (Wasm) programming language.</li>
</ul>

<p>These components are not part of the GraalVM Enterprise core distribution and
must be downloaded and installed separately. To assist a user with installation,
the components are pre-packaged as <em>JAR</em> files. GraalVM Updater also verifies
whether the version of a component is appropriate for the current installation.
Component packages are released for each GraalVM Enterprise distribution with
respective updates. Component packages downloaded for previous release(s) cannot
be used with newer ones.</p>

<p>The source code of GraalVM Updater is located in the <code>&lt;GRAALVM_HOME&gt;/lib/installer</code>
folder. To deploy the tool, confirm that GraalVM Enterprise is set in
your <code>PATH</code> environment variable.</p>

<p>A component may depend on requiring other components for its operation. GraalVM Updater
verifies such requirements and will attempt to download the required dependencies, or
abort the installation if component’s requirements are not met.</p>

<h2 id="component-installation">Component Installation</h2>
<p>Three modes of a component installation are supported:</p>

<h3 id="manual-installation">Manual Installation</h3>
<p>A manual installation is required for Oracle GraalVM Enterprise Edition users.</p>

<ol>
  <li>Download a component package from the <a href="https://www.oracle.com/downloads/graalvm-downloads.html">Oracle Technology Network</a> page. The following pre-built components are available for download:
    <ul>
      <li>Oracle GraalVM Enterprise Edition Native Image Early Adopter</li>
      <li>GraalVM LLVM Toolchain Plugin</li>
      <li>Oracle GraalVM Enterprise Edition Ruby Language Plugin</li>
      <li>Oracle GraalVM Enterprise Edition Python Language Plugin</li>
      <li>Oracle GraalVM Enterprise Edition WebAssembly Language Plugin</li>
    </ul>
  </li>
  <li>Having downloaded the component package in consideration of the operating system
and the underlying Java SE version, install it with:
    <pre><code>gu -L install component.jar
</code></pre>
    <p>For example, to install the Native Image component for Java 11 GraalVM Enterprise distribution on macOS, run:</p>
    <pre><code>gu -L install native-image-installable-svm-java11-darwin-amd64-20.0.1.jar
</code></pre>
  </li>
</ol>

<p>The <code>-L</code> option, equivalent to <code>--local-file</code> or <code>--file</code>, tells to install a component from a downloaded JAR.
However, a component may depend on other components (e.g., Ruby depends on the LLVM Toolchain plugin). For example, <code>gu
-L install component.jar</code> will fail if the required components are not yet
installed. If all dependencies are downloaded into the same directory, you can run:</p>
<pre><code>gu -L install -D
</code></pre>
<p>Check <code>gu --help</code> or <code>gu -C</code> how to instruct GraalVM Updater to find and process required components as well.</p>

<h3 id="installation-from-catalog">Installation from Catalog</h3>
<p>The R language plugin can be installed to GraalVM Enterprise from the GitHub
catalog, maintained by Oracle. This allows to install a component just by its
<code>ComponentId</code> value:</p>
<pre><code>gu install ComponentId
</code></pre>
<p>To install R, run:</p>
<pre><code>gu install r
</code></pre>
<p>GraalVM Updater first downloads the list of components, then uses the
information in the list to download the actual component package and installs
it. To see more verbose output during the installation, like the download
progress bar, print versions and dependency information, use the <code>-v</code>
(<code>--verbose</code>) switch.</p>

<p>If a component being installed depends on another component, GraalVM Updater will
search the catalog to find an appropriate dependency and install it as well. If
required components could not be found, installation will fail.</p>

<h3 id="installation-from-local-components-collection">Installation from Local Components Collection</h3>
<p>Components can be downloaded manually in advance to a local file folder, or to a
folder shared on the local network. GraalVM Updater can then use that folder
instead of the catalog:</p>
<pre><code>gu install -C /path/to/downloads/directory ComponentId
</code></pre>

<p>Specify the directory to use as components collection. It is possible to type
components names (like <code>ruby</code>) instead of filenames. GraalVM Updater will also
attempt to find required dependencies in the local component collection.</p>

<p>When installing components from a given directory, you can allow installing all
components which have correct version number for GraalVM Enterprise using wildcards:</p>
<pre><code>./gu install -C ~/Download/Components/ native*
</code></pre>
<p>It will install the <code>native-image</code> component, or anything that starts with <code>native</code>.</p>

<h3 id="check-installed-components">Check Installed Components</h3>
<p>Installed on a machine components can be printed with:</p>
<pre><code>gu list
</code></pre>

<p>A generic support R, Ruby, Python and WebAssembly languages will work out of the
box in most cases. It is recommended to fine-tune system-dependent
configurations, thus follow the recommendations in the component
post-installation messages.</p>

<p>If a necessary component installed, check its version:</p>
<pre><code>native-image --version
llvm-toolchain --version
ruby -v
Rscript --version
graalpython --version
wasm --version
</code></pre>

<p>Already installed on components can be printed with:</p>
<pre><code>gu list
</code></pre>

<h3 id="component-uninstallation">Component Uninstallation</h3>
<p>Components may be uninstalled from the GraalVM Enterprise installation when no
longer needed. To uninstall a specific component, use its <code>ComponentId</code>. Run
<code>gu list</code> to find out the exact <code>ComponentId</code>. The command to uninstall the
component is:</p>
<pre><code>gu remove ruby
</code></pre>
<p>If more components end with, for example, <code>ruby</code>, the installer will print an
error message that a component full name is required (<code>org.graalvm.ruby</code>).
The uninstallation removes the files created during the installation. If a file
belongs to multiple components, it will be removed when the last component using
it is removed.</p>

<h2 id="rebuild-images">Rebuild Images</h2>
<p>A set of GraalVM components that provide language implementations may change.
Polyglot native image and polyglot native C library may be out of sync, particularly:</p>
<ul>
  <li>new languages may not be accessible;</li>
  <li>removed languages may cause the native binary to fail on missing resources or libraries.</li>
</ul>

<p>To rebuild and refresh the native binaries, use the following command:</p>
<pre><code>gu rebuild-images [--verbose] polyglot|libpolyglot|js|llvm|python|ruby [custom native-image args]
</code></pre>

<h2 id="installation-configuration">Installation Configuration</h2>
<p>The installation command of GraalVM Updater accepts multiple options and parameters and allows this syntax:</p>
<pre><code>gu install [-0cCfFiLnorsuvyxY] param [param ...]
</code></pre>
<p>The following options are currently supported:</p>
<ul>
  <li><code>-0, --dry-run</code>: dry run, do not change anything</li>
  <li><code>-c, --catalog</code>: treat parameters as component IDs from the GraalVM components catalog. This is the default</li>
  <li><code>-C, --custom-catalog &lt;url&gt;</code>: use a specific catalog URL to locate components</li>
  <li><code>-L, --local-file</code>: treat parameters as local filenames of packaged components</li>
  <li><code>-f, --force</code>: force overwrite, bypass version checks</li>
  <li><code>-i, --fail-existing</code>: fail on an existing component</li>
  <li><code>-n, --no-progress</code>: do not display the downloading progress</li>
  <li><code>-o, --overwrite</code>: overwrite different files</li>
  <li><code>-r, --replace</code>: replace existing components</li>
  <li><code>-s, --no-verify-jars</code>: skip integrity verification of component archives</li>
  <li><code>-u, --url</code>: interpret parameters as URLs of packaged components</li>
  <li><code>-v, --verbose</code>: be verbose. Prints versions and dependency information</li>
  <li><code>-x, --ignore</code>: ignore failures</li>
  <li><code>-y, --only-validate</code>: do not install, just check compatibility and conflicting files</li>
  <li><code>-Y, --validate-before</code>: download, verify, check file conflicts before any disk change is made</li>
</ul>

<h2 id="graalvm-updater-commands-overview">GraalVM Updater Commands Overview</h2>

<p>There is a command-line help available by running <code>gu</code> or <code>gu -h</code>.</p>

<p>GraalVM Updater usage options:</p>
<ul>
  <li><code>gu info [-cClLnprstuvV] &lt;param&gt;</code>: print the information about specific component (from file, URL or catalog)</li>
  <li><code>gu available [-aClvV] &lt;expr&gt;</code>: list components available in the catalog</li>
  <li><code>gu install [-0cCDfFiLnorsuvyxY] &lt;param&gt;</code>: install a component package</li>
  <li><code>gu list [-clv] &lt;expression&gt;</code>: list installed components or components from catalog</li>
  <li><code>gu remove [-0Dfxv] &lt;id&gt;</code>: uninstall a component</li>
  <li><code>gu update [-cCnLsux] [&lt;ver&gt;] [&lt;param&gt;]</code>: upgrade to the recent GraalVM</li>
  <li><code>gu rebuild-images</code>: Rebuild native images. Use <code>-h</code> for detailed usage</li>
</ul>

<p>GraalVM Updater common options:</p>
<ul>
  <li><code>-A, --auto-yes</code>: say YES or ACCEPT to a question</li>
  <li><code>-c, --catalog</code>: treat parameters as component IDs from catalog of GraalVM components. This is the default</li>
  <li><code>-C, --custom-catalog &lt;url&gt;</code>: use user-supplied catalog at URL</li>
  <li><code>-e, --debug</code>: enable debugging and print stacktraces</li>
  <li><code>-E, --no-catalog-errors</code>: do not stop if at least one catalog is working</li>
  <li><code>-h, --help</code>: print help</li>
  <li><code>-L, --local-file, --file</code>: treat parameters as local filenames of packaged components</li>
  <li><code>-N, --non-interactive</code>: enable non-interactive mode. Fail when input is required</li>
  <li><code>--show-version</code>: print version information and continue</li>
  <li><code>-u, --url</code>: interpret parameters as URLs of packaged components</li>
  <li><code>-v, --verbose</code>: enable verbose output. Print versions and dependency information</li>
  <li><code>--version</code>: print version</li>
</ul>

<p>Oracle GraalVM Enterprise Edition users might need to pass an
additional verification step to login to Oracle components repository. GraalVM
Updater tool provides options for that:</p>
<ul>
  <li><code>--public-key / -k &lt;path&gt;</code> to set the path to a custom GPG public key path</li>
  <li><code>--username/-U</code> to enter a username</li>
</ul>

<p>Runtime options:</p>
<ul>
  <li><code>--native</code>: run using the native launcher with limited Java access (default)</li>
  <li><code>--jvm</code>: run on the Java Virtual Machine with Java access</li>
  <li><code>--vm.[option]</code>: pass options to the host VM. To see available options, use <code>--help:vm</code></li>
  <li><code>--log.file=&lt;String&gt;</code>: redirect guest languages logging into a given file</li>
  <li><code>--log.[logger].level=&lt;String&gt;</code>: set language log level to OFF, SEVERE, WARNING, INFO, CONFIG, FINE, FINER, FINEST or ALL</li>
  <li><code>--help</code>: print this help message</li>
  <li><code>--help:vm</code>: print options for the host VM</li>
</ul>

<h2 id="configure-proxies">Configure Proxies</h2>
<p>If GraalVM Updater needs to reach the component catalog, or download a component
package, it may need to pass through the HTTP/HTTPS proxy, if the network uses one. On
<em>macOS</em>, the proxy settings are automatically obtained from the OS. On <em>Linux</em>,
ensure that the <code>http_proxy</code> and <code>https_proxy</code> environment variables are set
appropriately before launching the <code>gu</code> tool. Refer to the distribution
and/or desktop environment documentation for the details.</p>

<p>GraalVM Updater intentionally does not support an option to disable certificate
or hostname verification, for security reasons. A user may try to add proxy’s
certificate to the GraalVM default security trust store. A user can also
download the components manually to a folder, and then use <code>gu -L install
/path/to/file</code> or <code>gu -C /path/to/download/dir install component</code> to install
from a local filesystem.</p>

<h3 id="working-without-internet-access">Working without Internet Access</h3>
<p>If your machine cannot access and download Catalog and GraalVM components from
the Internet, either because it is behind a proxy, or for security reasons,
Graal Updater can install components from a local directory, or a directory on
a network share accessible on the target machine.</p>

<p>You need to prepare a directory, download all Components that you want to install
and their dependencies (in case they require other GraalVM components to work) into
that directory.</p>

<p>Then you can use <code>gu -L install /path/to/file</code> (where <code>-L</code> option instructs to use local files,
equivalent to –local-file or –file). Adding <code>-D</code> option will instruct Graal Updater
to look for potential dependencies in the directory next to the
installable file. Additionally, <code>gu -C /path/to/download/dir install component</code> can be used, the specified
directory contents acting as a Catalog of components.</p>

<p>Note that with <code>gu -L</code> you need to specify the component’s file name, while
when using <code>gu -C &lt;dir&gt;</code>, the component name must be used:</p>

<pre><code># Specify file location
gu -LD install /tmp/installables/fastr.jar

# Specify component name
gu -C /tmp/instalables install r
</code></pre>

<h2 id="replace-components-and-files">Replace Components and Files</h2>
<p>A component may be only installed once. GraalVM Updater refuses to install a
component if a component with the same ID is already installed. But the
installed component may be <strong>replaced</strong>. GraalVM Updater first uninstalls the
component and then installs a new package. To replace component, use <code>-r</code>
option, and the <code>-L</code> (<code>--local-file</code> or <code>--file</code>) option to treat parameters as local filename of a packaged component:</p>
<pre><code>gu install -L -r component.jar
gu install -r ruby
</code></pre>
<p>The process is the same as if <code>gu remove</code> is run first and <code>gu install</code> next.</p>

<p>The GraalVM Updater also refuses to overwrite existing files if the
to-be-installed and existing versions differ. There are cases when refreshing
file contents may be needed, if they were modified or damaged. Use <code>-o</code> option:</p>
<pre><code>gu install -L -o component.jar
gu install -o ruby
</code></pre>
<p>GraalVM Updater will just instruct to replace the contained files of a
component. By default, it will not alter anything. Alternatively, use <code>-f</code>
(<code>--force</code>) option, which disables most of the checks and allows to install
non-matching versions.</p>

<h3 id="troubleshooting">Troubleshooting</h3>
<p>If a language component is not installed running the code that tries to initialize the language context can result in an exception like this:</p>
<pre><code>java.lang.ExceptionInInitializerError
Caused by: com.oracle.truffle.polyglot.PolyglotIllegalArgumentException: A language with id '$language' is not installed. Installed languages are: [js, llvm].
</code></pre>

<p>If you see a problem like that, install the language component as explained on this page above.</p>

            
        </article>
    </body>
</html>
