<!DOCTYPE html>
<html xml:lang="en-us" lang="en-us">
    <head>
        




        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta property="og:site_name" content="Oracle Help Center">

        <!-- The title values -->
        <title></title>
        <meta property="og:title" content="">
        <meta name="application-name" content="GraalVM Community">
        <meta name="dcterms.title" content="">
        <!-- The description values -->
        
        
        
        <meta name="dcterms.created" content="2020-08-24T11:38:42+00:00">
        <meta name="dcterms.category" content="">
        <meta name="dcterms.identifier" content="">
        <meta name="dcterms.product" content="">
        <meta name="dcterms.isVersionOf" content="">

        <link rel="prev" href="/en/graalvm/enterprise/20/docs/reference-manual/graalvm-updater/" title="Previous" type="text/html">
        <link rel="next" href="/en/graalvm/enterprise/20/docs/reference-manual/embed-languages/" title="Next" type="text/html">
        <link rel="first" href="/main.html" title="First Page" type="text/html">
        <link rel="contents" href="/toc.htm" title="Table of Contents" type="text/html">
        <link rel="self" href="/reference-manual/enterprise-native-image/" title="Current Page" type="text/html">

        <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
        <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
        <meta name="robots" content="all">
        <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
        <script>
            document.write('<style type="text/css">');
            document.write('body > .noscript, body > .noscript ~ * { opacity: 0; }');
            document.write('</style>');
        </script>
        <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
        <script>
            if (window.require === undefined) {
                document.write('<script data-main="../../sp_common/book-template/ohc-book-template/js/book-config" src="../../sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="../../sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet">');
            }
        </script>
    </head>
    <body>
        <div class="noscript alert alert-danger text-center" role="alert">
            <a href="/en/graalvm/enterprise/20/docs/reference-manual/graalvm-updater/" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
            <a href="/en/graalvm/enterprise/20/docs/reference-manual/embed-languages/" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
            <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        </div>
        <article>
            <h2 id="graalvm-enterprise-native-image">GraalVM Enterprise Native Image</h2>

<ul>
  <li><a href="#install-native-image">Install Native Image</a></li>
  <li><a href="#build-native-image">Build Native Image</a></li>
  <li><a href="#prerequisites">Prerequisites</a></li>
  <li><a href="#how-to-determine-what-version-of-graalvm-a-native-image-is-generated-with">How to Determine What Version of GraalVM a Native Image is Generated with</a></li>
  <li><a href="#ahead-of-time-compilation-limitations">Ahead-of-time Compilation Limitations</a></li>
</ul>

<p>GraalVM Enterprise Native Image allows to ahead-of-time compile Java code to a standalone executable, called
a <strong>native image</strong>. This executable includes the application classes, classes
from its dependencies, runtime library classes from JDK and statically linked
native code from JDK. It does not run on the Java VM, but includes necessary
components like memory management and thread scheduling from a different virtual
machine, called “Substrate VM”. Substrate VM is the name for the runtime
components (like the deoptimizer, garbage collector, thread scheduling etc.).
The resulting program has faster startup time and lower runtime memory overhead
compared to a Java VM.</p>

<p>The <strong>Native Image builder</strong> or <code>native-image</code> is a utility that processes all
the classes of your application and their dependencies, including those from the
JDK. It statically analyses these classes to determine which classes and methods
are reachable during application execution. which ahead-of-time compiles it to a
native executable for a specific operating system and architecture.  This entire
process is called an <strong>image build time</strong> to clearly distinguish it from the
compilation of Java source code to bytecode.</p>

<p>GraalVM Enterprise Native Image supports JVM-based languages, e.g., Java, Scala,
Clojure, Kotlin. The resulting native image can, optionally, execute dynamic
languages like JavaScript, Ruby, R, or Python, but it does not pre-compile their code
itself. Polyglot embeddings can also be compiled ahead-of-time. To inform
<code>native-image</code> of guest languages used by an application, specify
<code>--language:&lt;languageId&gt;</code> for each guest language used (e.g., <code>--language:js</code>).</p>

<p>Note: GraalVM Enterprise Native Image is
available as an <a href="https://docs.oracle.com/en/graalvm/enterprise/20/docs/overview/licensing-information.html">Early Adopter technology</a>.</p>

<p><img src="/docs/reference-manual/native-image/overview_native-image-gen-image.png" alt="" /></p>

<h2 id="install-native-image">Install Native Image</h2>

<p>Native Image is distributed as a separate installable and can be added to GraalVM
Enterprise with the <a href="/en/graalvm/enterprise/20/docs/reference-manual/graalvm-updater/">GraalVM Updater</a>
tool. Download the Native Image component from <a href="https://www.oracle.com/downloads/graalvm-downloads.html">Oracle Technology Network</a>. You must accept the License Agreement before downloading. Then install Native Image
from the JAR file:</p>
<ul>
  <li>on macOS
    <pre><code>gu -L install ./native-image-installable-svm-svmee-&lt;java8/java11&gt;-darwin-amd64-&lt;version&gt;.jar
</code></pre>
  </li>
  <li>on Linux
    <pre><code>gu -L install ./native-image-installable-svm-svmee-&lt;java8/java11&gt;-linux-amd64-&lt;version&gt;.jar
</code></pre>
  </li>
  <li>on Windows
    <pre><code>gu -L install ./native-image-installable-svm-svmee-&lt;java8/java11&gt;-windows-amd64-&lt;version&gt;.jar
</code></pre>
    <p>where <code>-L</code>, equivalent to <code>--local-file</code> or <code>--file</code>, tells to treat a local
filename of the packaged component as a parameter.</p>
  </li>
</ul>

<p>Optionally, you can install Native Image from a local components collection:</p>
<pre><code>gu install -C /path/to/downloads/directory native-image
</code></pre>
<p>When installing components from a given directory, you can allow installing all
components which have a correct version number for GraalVM Enterprise using wildcards:</p>
<pre><code>gu install -C ~/Download/Components/ native*
</code></pre>

<p>After this additional step, the <code>native-image</code> executable will become available in
the <code>bin</code> directory.</p>

<h2 id="build-native-image">Build Native Image</h2>

<p>To build an image for a class in the current working directory,  use:</p>
<pre><code>native-image [options] class [imagename] [options]
</code></pre>

<p>To build an image for a jar file, use:</p>
<pre><code>native-image [options] -jar jarfile [imagename] [options]
</code></pre>
<p>The <code>native-image</code> command needs to provide the class path for all classes using
the familiar option from the <code>java</code> launcher: <code>-cp</code> followed by a list of
directories or .jar files, separated by <code>:</code>. The name of the class containing
the main method is the last argument, or you can use <code>-jar</code> and provide a .jar
file that specifies the main method in its manifest.</p>

<p>GraalVM <code>native-image</code> supports JVM-based languages, e.g., Java, Scala, Kotlin.
The resulting native image can, optionally, execute dynamic languages
like Ruby, R, or Python, but it does not pre-compile their code itself. Polyglot
embeddings can also be compiled ahead-of-time. To inform <code>native-image</code> of guest
languages used by an application, specify <code>--language:&lt;languageId&gt;</code> for each
guest language used (e.g., <code>--language:js</code>).</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>For compilation <code>native-image</code> depends on the local toolchain. Install
 <code>glibc-devel</code>, <code>zlib-devel</code> (header files for the C library and <code>zlib</code>)
and <code>gcc</code>, using a package manager available on your OS. Some Linux distributions may additionally require <code>libstdc++-static</code>.</p>

<p>On Oracle Linux use <code>yum</code> package manager:</p>
<pre><code>sudo yum install gcc glibc-devel zlib-devel
</code></pre>
<p>On  Ubuntu Linux use <code>apt-get</code> package manager:</p>
<pre><code>sudo apt-get install build-essential libz-dev zlib1g-dev
</code></pre>
<p>On other Linux distributions use <code>dnf</code> package manager:</p>
<pre><code>sudo dnf install gcc glibc-devel zlib-devel libstdc++-static
</code></pre>
<p>On macOS use <code>xcode</code>:</p>
<pre><code>xcode-select --install
</code></pre>

<h4 id="prerequisites-for-using-native-image-on-windows">Prerequisites for Using Native Image on Windows</h4>
<p>To make use of Native Image on Windows, follow the further recommendations. The
required Microsoft Visual C++ (MSVC) version depends on the JDK version that
GraalVM is based on. For GraalVM distribution based on JDK 8, you will need MSVC
2010 SP1 version. The recommended installation method is using Microsoft Windows
SDK 7.1:</p>
<ol>
  <li>Download the SDK file <code>GRMSDKX_EN_DVD.iso</code> for from <a href="https://www.microsoft.com/en-gb/download">Microsoft</a>.</li>
  <li>Mount the image by opening <code>F:\Setup\SDKSetup.exe</code> directly.</li>
</ol>

<p>For GraalVM distribution based on JDK 11, you will need MSVC 2017 15.5.5 or later version.</p>

<p>The last prerequisite, common for both GraalVM distribution based on JDK 11 and JDK 8, is the proper <a href="https://docs.microsoft.com/en-us/cpp/build/building-on-the-command-line?view=vs-2019#developer_command_prompt_shortcuts">Developer Command Prompt</a> for your version of <a href="https://visualstudio.microsoft.com/vs/">Visual Studio</a>. On Windows the <code>native-image</code> tool only works when it is executed from the <strong>x64 Native Tools Command Prompt</strong>.</p>

<h2 id="how-to-determine-what-version-of-graalvm-a-native-image-is-generated-with">How to Determine What Version of GraalVM a Native Image Is Generated With</h2>

<p>Assuming you have a Java class file <em>EmptyHello.class</em> containing an empty main method
and have generated an empty shared object <code>emptyhello</code> with GraalVM Native Image Generator utility of it:</p>
<pre><code>native-image -cp hello EmptyHello
[emptyhello:11228]    classlist:     149.59 ms
...
</code></pre>

<p>If you do not know what GraalVM distribution is set to the <code>PATH</code> environment
variable, how to determine if a native image was compiled with Community or
Enterprise Edition? Run this command:</p>

<pre><code>strings emptyhello | grep com.oracle.svm.core.VM
</code></pre>

<p>The expected output should match the following:</p>
<pre><code>com.oracle.svm.core.VM GraalVM 20.2.0 Java 11 EE
</code></pre>

<p><strong>Note:</strong>
Python source code or LLVM bitcode interpreted or compiled with GraalVM
Community Edition will not have the same security characteristics as the same
code interpreted or compiled using GraalVM Enterprise Edition. There is a
GraalVM string embedded in each image that allows to figure out the version and
variant of the base (Community or Enterprise) used to build an image.
The following command will query that information from an image:</p>
<pre><code>strings &lt;path to native-image exe or shared object&gt; | grep com.oracle.svm.core.VM
</code></pre>
<p>Here is an example output:</p>
<pre><code>com.oracle.svm.core.VM.Target.LibC=com.oracle.svm.core.posix.linux.libc.GLibC
com.oracle.svm.core.VM.Target.Platform=org.graalvm.nativeimage.Platform$LINUX_AMD64
com.oracle.svm.core.VM.Target.StaticLibraries=liblibchelper.a|libnet.a|libffi.a|libextnet.a|libnio.a|libjava.a|libfdlibm.a|libzip.a|libjvm.a
com.oracle.svm.core.VM=GraalVM 20.2.0 Java 11
com.oracle.svm.core.VM.Target.Libraries=pthread|dl|z|rt
com.oracle.svm.core.VM.Target.CCompiler=gcc|redhat|x86_64|10.2.1
</code></pre>
<p>If the image was build with Oracle GraalVM Enterprise Edition the output would instead contain:</p>
<pre><code>com.oracle.svm.core.VM=GraalVM 20.2.0 Java 11 EE
</code></pre>

<h2 id="ahead-of-time-compilation-limitations">Ahead-of-time Compilation Limitations</h2>

<p>There is a small portion of Java features are not susceptible to ahead-of-time
compilation, and will therefore miss out on the performance advantages. To be
able to build a highly optimized native executable, we run an aggressive static
analysis that requires a closed-world assumption, which means that all classes
and all bytecodes that are reachable at runtime must be known at build-time.
Therefore, it is not possible to load new data that have not been available
during ahead-of-time compilation. Continue reading to the <a href="/en/graalvm/enterprise/20/docs/reference-manual/native-image/Limitations/">GraalVM Native Image Compatibility and Optimization Guide</a>.</p>

            
        </article>
    </body>
</html>
